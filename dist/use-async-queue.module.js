import{useState as n,useRef as r,useCallback as t,useEffect as u}from"react";export default function(c){var e=c.concurrency;void 0===e&&(e=8);var o=c.done;void 0===o&&(o=function(){});var i=c.inflight;void 0===i&&(i=function(){}),e<1&&(e=Infinity);var f=n(0),a=f[0],p=f[1],v=n(0),s=v[0],d=v[1],h=n(0),g=h[0],l=h[1],m=r([]),b=r([]);return u(function(){for(var n=function(){var n=b.current.pop();d(function(n){return n-1}),m.current.push(n),p(function(n){return n+1}),i(n);var r=n.task();r.then(function(){m.current.pop(n),p(function(n){return n-1}),l(function(n){return n+1}),o(Object.assign({},n,{result:r}))}).catch(function(){m.current.pop(n),p(function(n){return n-1}),l(function(n){return n+1}),o(Object.assign({},n,{result:r}))})};m.current.length<e&&b.current.length>0;)n()},[e,o,i,s,a]),{add:t(function(n){b.current.push(n),d(function(n){return n+1})},[b]),numInFlight:a,numPending:s,numDone:g}}
//# sourceMappingURL=use-async-queue.module.js.map
