import{useState as n,useRef as r,useCallback as t,useEffect as e}from"react";export default function(u){var c=u.concurrency;void 0===c&&(c=8);var o=u.done;c<1&&(c=Infinity);var i=n(0),l=i[0],f=i[1],a=n(0),s=a[0],g=a[1],d=n(0),p=d[0],h=d[1],v=r([]),m=r([]);return e(function(){console.log("DEBUG: useEffect called",l,v.current.length,s,m.current.length);for(var n=function(){var n=m.current.pop();g(function(n){return n-1}),v.current.push(n),f(function(n){return n+1});var r=n.task();r.then(function(){console.log("DEBUG: task resolved, calling done"),v.current.pop(n),f(function(n){return n-1}),h(function(n){return n+1}),o(Object.assign({},n,{result:r}))}).catch(function(){console.log("DEBUG: task rejected, calling done"),v.current.pop(n),f(function(n){return n-1}),h(function(n){return n+1}),o(Object.assign({},n,{result:r}))})};v.current.length<c&&m.current.length>0;)n()},[c,o,s,l]),{add:t(function(n){m.current.push(n),g(function(n){return n+1})},[m]),numInFlight:l,numPending:s,numDone:p}}
//# sourceMappingURL=use-async-queue.module.js.map
