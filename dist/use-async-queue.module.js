import{useState as n,useRef as r,useCallback as t,useEffect as e}from"react";export default function(u){var c=u.concurrency,o=u.done;c<1&&(c=1);var i=n(0),l=i[0],a=i[1],f=n(0),s=f[0],g=f[1],p=n(0),d=p[0],h=p[1],m=r([]),v=r([]);return e(function(){console.log("DEBUG: useEffect called",l,m.current.length,s,v.current.length);for(var n=function(){var n=v.current.pop();g(function(n){return n-1}),m.current.push(n),a(function(n){return n+1});var r=n.task();r.then(function(){console.log("DEBUG: task resolved, calling done"),m.current.pop(n),a(function(n){return n-1}),h(function(n){return n+1}),o(Object.assign({},n,{result:r}))}).catch(function(){console.log("DEBUG: task rejected, calling done"),m.current.pop(n),a(function(n){return n-1}),h(function(n){return n+1}),o(Object.assign({},n,{result:r}))})};m.current.length<c&&v.current.length>0;)n()},[c,o,s,l]),{add:t(function(n){v.current.push(n),g(function(n){return n+1})},[v]),numInFlight:l,numRemaining:s,numDone:d}}
//# sourceMappingURL=use-async-queue.module.js.map
