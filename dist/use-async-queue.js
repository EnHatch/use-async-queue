var n=require("react");module.exports=function(t){var r=t.concurrency;void 0===r&&(r=8);var u=t.done;void 0===u&&(u=function(){});var e=t.inflight;void 0===e&&(e=function(){}),r<1&&(r=Infinity);var c=n.useState(0),i=c[0],o=c[1],f=n.useState(0),a=f[0],s=f[1],v=n.useState(0),h=v[0],l=v[1],d=n.useRef([]),g=n.useRef([]);return n.useEffect(function(){for(var n=function(){var n=g.current.shift();s(function(n){return n-1}),d.current.push(n),o(function(n){return n+1}),e(n);var t=n.task();t.then(function(){d.current.pop(n),o(function(n){return n-1}),l(function(n){return n+1}),u(Object.assign({},n,{result:t}))}).catch(function(){d.current.pop(n),o(function(n){return n-1}),l(function(n){return n+1}),u(Object.assign({},n,{result:t}))})};d.current.length<r&&g.current.length>0;)n()},[r,u,e,a,i]),{add:n.useCallback(function(n){g.current.push(n),s(function(n){return n+1})},[g]),numInFlight:i,numPending:a,numDone:h}};
//# sourceMappingURL=use-async-queue.js.map
