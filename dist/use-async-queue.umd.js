!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):n.useAsyncQueue=e(n.react)}(this,function(n){return function(e){var t=e.concurrency;void 0===t&&(t=8);var u=e.done;t<1&&(t=Infinity);var r=n.useState(0),c=r[0],o=r[1],f=n.useState(0),i=f[0],s=f[1],a=n.useState(0),l=a[0],d=a[1],g=n.useRef([]),p=n.useRef([]);return n.useEffect(function(){console.log("DEBUG: useEffect called",c,g.current.length,i,p.current.length);for(var n=function(){var n=p.current.pop();s(function(n){return n-1}),g.current.push(n),o(function(n){return n+1});var e=n.task();e.then(function(){console.log("DEBUG: task resolved, calling done"),g.current.pop(n),o(function(n){return n-1}),d(function(n){return n+1}),u(Object.assign({},n,{result:e}))}).catch(function(){console.log("DEBUG: task rejected, calling done"),g.current.pop(n),o(function(n){return n-1}),d(function(n){return n+1}),u(Object.assign({},n,{result:e}))})};g.current.length<t&&p.current.length>0;)n()},[t,u,i,c]),{add:n.useCallback(function(n){p.current.push(n),s(function(n){return n+1})},[p]),numInFlight:c,numPending:i,numDone:l}}});
//# sourceMappingURL=use-async-queue.umd.js.map
