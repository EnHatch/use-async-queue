!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("react")):"function"==typeof define&&define.amd?define(["react"],n):e.useAsyncQueue=n(e.react)}(this,function(e){return function(n){var t=n.concurrency,u=n.done;t<1&&(t=1);var r=e.useState(0),c=r[0],o=r[1],f=e.useState(0),i=f[0],s=f[1],a=e.useState(0),l=a[0],d=a[1],g=e.useRef([]),p=e.useRef([]);return e.useEffect(function(){console.log("DEBUG: useEffect called",c,g.current.length,i,p.current.length);for(var e=function(){var e=p.current.pop();s(function(e){return e-1}),g.current.push(e),o(function(e){return e+1});var n=e.task();n.then(function(){console.log("DEBUG: task resolved, calling done"),g.current.pop(e),o(function(e){return e-1}),d(function(e){return e+1}),u(Object.assign({},e,{result:n}))}).catch(function(){console.log("DEBUG: task rejected, calling done"),g.current.pop(e),o(function(e){return e-1}),d(function(e){return e+1}),u(Object.assign({},e,{result:n}))})};g.current.length<t&&p.current.length>0;)e()},[t,u,i,c]),{add:e.useCallback(function(e){p.current.push(e),s(function(e){return e+1})},[p]),numInFlight:c,numRemaining:i,numDone:l}}});
//# sourceMappingURL=use-async-queue.umd.js.map
