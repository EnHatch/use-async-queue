!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("next-tick")):"function"==typeof define&&define.amd?define(["react","next-tick"],e):n.useAsyncQueue=e(n.react,n.nextTick)}(this,function(n,e){return e=e&&e.hasOwnProperty("default")?e.default:e,function(t){var u=t.done,r=t.drain,i=t.inflight,c=t.concurrency;c<1&&(c=Infinity);var s=n.useState({numPending:0,numInFlight:0,numDone:0}),o=s[0],f=s[1],a=n.useRef(!0),g=n.useRef([]),m=n.useRef([]);return n.useEffect(function(){if(o.numDone>0&&r&&0===g.current.length&&0===m.current.length&&!a.current)return a.current=!0,e(r);for(var n=function(){a.current=!1;var n=m.current.shift();g.current.push(n),f(function(n){return Object.assign({},n,{numPending:n.numPending-1,numInFlight:n.numInFlight+1})}),i&&i(Object.assign({},n,{stats:o}));var e=n.task();e.then(function(){g.current.pop(),f(function(n){return Object.assign({},n,{numInFlight:n.numInFlight-1,numDone:n.numDone+1})}),u&&u(Object.assign({},n,{result:e,stats:o}))}).catch(function(){g.current.pop(),f(function(n){return Object.assign({},n,{numInFlight:n.numInFlight-1,numDone:n.numDone+1})}),u&&u(Object.assign({},n,{result:e,stats:o}))})};g.current.length<c&&m.current.length>0;)n()},[c,u,r,i,o]),{add:n.useCallback(function(n){m.current.push(n),f(function(n){return Object.assign({},n,{numPending:n.numPending+1})})},[]),stats:o}}});
//# sourceMappingURL=use-async-queue.umd.js.map
